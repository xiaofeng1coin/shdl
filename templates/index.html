{% extends "base.html" %}
{% block content %}
    <div class="dashboard-container">
        <!-- 背景图片 -->
        <div class="dashboard-bg"></div>
        <div class="dashboard-content">
            <!-- 用户信息 -->
            <div class="user-info">
                <div class="user-avatar">
                    <img src="{{ url_for('static', filename='avatar.jpg') }}" alt="Avatar" class="avatar-img">
                </div>
                <div class="user-details">
                    <span class="username">{{ current_user.username }}</span>
                    <span class="register-time">{{ current_user.register_time.strftime('%Y-%m-%d') }}</span>
                </div>
                <div class="generation-stats">
                    <div class="stat">
                        <span class="stat-title">历史生成总量</span>
                        <span class="stat-value total-value">{{ total_links }}</span>
                    </div>
                    <div class="stat">
                        <span class="stat-title">本月生成量</span>
                        <span class="stat-value monthly-value">{{ monthly_links }}</span>
                    </div>
                    <div class="stat">
                        <span class="stat-title">昨日生成量</span>
                        <span class="stat-value yesterday-value">{{ yesterday_links }}</span>
                    </div>
                </div>
                <div class="update-time">更新时间: {{ update_time }}</div>
            </div>
            <!-- 最近的链接 -->
            <div class="recent-links">
                <h3>最近的链接</h3>
                <ul>
                    {% for i in range(0, recent_links|length if recent_links|length < 5 else 5) %}
                    <li>
                        <span class="link-number">{{ i + 1 }}.</span>
                        <a href="{{ url_for('link_stats', short_code=recent_links[i].short_code) }}">{{ request.host_url }}{{ recent_links[i].short_code }}</a>
                        <span class="link-clicks">点击量: {{ recent_links[i].clicks }}</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="button-container">
                <a href="{{ url_for('links') }}" class="btn create-link-btn">创建新链接</a>
            </div>
        </div>
    </div>
{% endblock %}